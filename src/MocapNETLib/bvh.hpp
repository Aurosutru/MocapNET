#pragma once
/** @file bvh.hpp
 *  @brief This is an interface to the BVH code. The BVH code ( https://github.com/AmmarkoV/RGBDAcquisition/tree/master/opengl_acquisition_shared_library/opengl_depth_and_color_renderer/src/Library/MotionCaptureLoader )
 *  might not be available. If this is the case then CMake will not declare the USE_BVH compilation flag and the whole code will not be included.
 *  @author Ammar Qammaz (AmmarkoV)
 */

#include <iostream>
#include <vector>



/**
 * @brief This is a BVH header that can be easily injected in a file ( using just an fprintf call )
 */
//To do this get replace \n with \\n"\n" in headerWithHead.bvh
static const char * bvhHeader=
"HIERARCHY\n"
"ROOT hip\n"
"{\n"
"  OFFSET 0 0 0\n"
"  CHANNELS 6 Xposition Yposition Zposition Zrotation Yrotation Xrotation\n"
"  JOINT abdomen\n"
"  {\n"
"    OFFSET 0 20.6881 -0.73152\n"
"    CHANNELS 3 Zrotation Xrotation Yrotation\n"
"    JOINT chest\n"
"    {\n"
"      OFFSET 0 11.7043 -0.48768\n"
"      CHANNELS 3 Zrotation Xrotation Yrotation\n"
"      JOINT neck\n"
"      {\n"
"          OFFSET 0.000000 14.013250 1.361400\n"
"          CHANNELS 3 Zrotation Xrotation Yrotation \n"
"          JOINT neck1\n"
"          {\n"
"            OFFSET 0.000000 5.364170 1.574630\n"
"            CHANNELS 3 Zrotation Xrotation Yrotation \n"
"            JOINT head\n"
"            {\n"
"              OFFSET 0.000000 5.364141 1.574630\n"
"              CHANNELS 3 Zrotation Xrotation Yrotation \n"
"              JOINT __jaw\n"
"              {\n"
"                OFFSET 0.000000 13.604700 -0.502080\n"
"                CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                JOINT jaw\n"
"                {\n"
"                  OFFSET 0.000000 -13.499860 2.500710\n"
"                  CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                  JOINT special04\n"
"                  {\n"
"                    OFFSET -0.000000 -6.835370 4.375500\n"
"                    CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                    JOINT oris02\n"
"                    {\n"
"                      OFFSET 0.000000 1.711150 2.820850\n"
"                      CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                      JOINT oris01\n"
"                      {\n"
"                        OFFSET -0.000000 0.972390 0.845650\n"
"                        CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                        End Site\n"
"                        {\n"
"                          OFFSET 0.000000 1.162291 0.607091\n"
"                        }\n"
"                      }\n"
"                    }\n"
"                    JOINT oris06.l\n"
"                    {\n"
"                      OFFSET 0.000000 1.711150 2.820850\n"
"                      CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                      JOINT oris07.l\n"
"                      {\n"
"                        OFFSET 1.168850 0.445180 0.506110\n"
"                        CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                        End Site\n"
"                        {\n"
"                          OFFSET 0.450611 1.195178 0.204519\n"
"                        }\n"
"                      }\n"
"                    }\n"
"                    JOINT oris06.r\n"
"                    {\n"
"                      OFFSET 0.000000 1.711150 2.820850\n"
"                      CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                      JOINT oris07.r\n"
"                      {\n"
"                        OFFSET -1.168850 0.445180 0.506110\n"
"                        CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                        End Site\n"
"                        {\n"
"                          OFFSET -0.450611 1.195173 0.204519\n"
"                        }\n"
"                      }\n"
"                    }\n"
"                  }\n"
"                  JOINT tongue00\n"
"                  {\n"
"                    OFFSET -0.000000 -6.835370 4.375500\n"
"                    CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                    JOINT tongue01\n"
"                    {\n"
"                      OFFSET 0.000000 3.973650 -3.762340\n"
"                      CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                      JOINT tongue02\n"
"                      {\n"
"                        OFFSET 0.000000 0.429760 2.924710\n"
"                        CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                        JOINT tongue03\n"
"                        {\n"
"                          OFFSET 0.000000 0.018530 2.059010\n"
"                          CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                          JOINT __tongue04\n"
"                          {\n"
"                            OFFSET 0.000000 -0.440240 0.838860\n"
"                            CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                            JOINT tongue04\n"
"                            {\n"
"                              OFFSET 0.000000 0.000000 0.000000\n"
"                              CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                              End Site\n"
"                              {\n"
"                                OFFSET 0.000000 -0.440230 0.838860\n"
"                              }\n"
"                            }\n"
"                          }\n"
"                          JOINT tongue07.l\n"
"                          {\n"
"                            OFFSET 0.000000 -0.440240 0.838860\n"
"                            CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                            End Site\n"
"                            {\n"
"                              OFFSET 1.160923 -0.331531 0.018227\n"
"                            }\n"
"                          }\n"
"                          JOINT tongue07.r\n"
"                          {\n"
"                            OFFSET 0.000000 -0.440240 0.838860\n"
"                            CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                            End Site\n"
"                            {\n"
"                              OFFSET -1.160922 -0.331531 0.018227\n"
"                            }\n"
"                          }\n"
"                        }\n"
"                        JOINT tongue06.l\n"
"                        {\n"
"                          OFFSET 0.000000 0.018530 2.059010\n"
"                          CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                          End Site\n"
"                          {\n"
"                            OFFSET 1.644752 -0.526075 -0.203281\n"
"                          }\n"
"                        }\n"
"                        JOINT tongue06.r\n"
"                        {\n"
"                          OFFSET 0.000000 0.018530 2.059010\n"
"                          CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                          End Site\n"
"                          {\n"
"                            OFFSET -1.644752 -0.526075 -0.203282\n"
"                          }\n"
"                        }\n"
"                      }\n"
"                      JOINT tongue05.l\n"
"                      {\n"
"                        OFFSET 0.000000 0.429760 2.924710\n"
"                        CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                        End Site\n"
"                        {\n"
"                          OFFSET 1.971028 -0.388618 0.239206\n"
"                        }\n"
"                      }\n"
"                      JOINT tongue05.r\n"
"                      {\n"
"                        OFFSET 0.000000 0.429760 2.924710\n"
"                        CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                        End Site\n"
"                        {\n"
"                          OFFSET -1.971028 -0.388618 0.239205\n"
"                        }\n"
"                      }\n"
"                    }\n"
"                  }\n"
"                }\n"
"              }\n"
"              JOINT __levator02.l\n"
"              {\n"
"                OFFSET 0.000000 13.604700 -0.502080\n"
"                CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                JOINT levator02.l\n"
"                {\n"
"                  OFFSET 0.313580 -11.321120 11.599360\n"
"                  CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                  JOINT levator03.l\n"
"                  {\n"
"                    OFFSET 1.681690 -1.563730 -1.357570\n"
"                    CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                    JOINT levator04.l\n"
"                    {\n"
"                      OFFSET 0.504730 -1.676760 -0.058160\n"
"                      CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                      JOINT levator05.l\n"
"                      {\n"
"                        OFFSET 0.145440 -1.643170 -0.225470\n"
"                        CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                        End Site\n"
"                        {\n"
"                          OFFSET -0.310116 -0.760198 -0.121474\n"
"                        }\n"
"                      }\n"
"                    }\n"
"                  }\n"
"                }\n"
"              }\n"
"              JOINT __levator02.r\n"
"              {\n"
"                OFFSET 0.000000 13.604700 -0.502080\n"
"                CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                JOINT levator02.r\n"
"                {\n"
"                  OFFSET -0.313580 -11.321120 11.599360\n"
"                  CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                  JOINT levator03.r\n"
"                  {\n"
"                    OFFSET -1.681690 -1.563740 -1.357570\n"
"                    CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                    JOINT levator04.r\n"
"                    {\n"
"                      OFFSET -0.504730 -1.676750 -0.058160\n"
"                      CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                      JOINT levator05.r\n"
"                      {\n"
"                        OFFSET -0.145440 -1.643170 -0.225470\n"
"                        CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                        End Site\n"
"                        {\n"
"                          OFFSET 0.310116 -0.760193 -0.121474\n"
"                        }\n"
"                      }\n"
"                    }\n"
"                  }\n"
"                }\n"
"              }\n"
"              JOINT __special01\n"
"              {\n"
"                OFFSET 0.000000 13.604700 -0.502080\n"
"                CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                JOINT special01\n"
"                {\n"
"                  OFFSET -0.000000 -14.026930 -5.716970\n"
"                  CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                  JOINT oris04.l\n"
"                  {\n"
"                    OFFSET -0.000000 -0.492640 17.312620\n"
"                    CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                    JOINT oris03.l\n"
"                    {\n"
"                      OFFSET 1.215520 -0.627430 -0.393050\n"
"                      CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                      End Site\n"
"                      {\n"
"                        OFFSET 0.288776 -0.560899 -0.149645\n"
"                      }\n"
"                    }\n"
"                  }\n"
"                  JOINT oris04.r\n"
"                  {\n"
"                    OFFSET -0.000000 -0.492640 17.312620\n"
"                    CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                    JOINT oris03.r\n"
"                    {\n"
"                      OFFSET -1.215520 -0.627440 -0.393050\n"
"                      CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                      End Site\n"
"                      {\n"
"                        OFFSET -0.288776 -0.560894 -0.149645\n"
"                      }\n"
"                    }\n"
"                  }\n"
"                  JOINT oris06\n"
"                  {\n"
"                    OFFSET -0.000000 -0.492640 17.312620\n"
"                    CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                    JOINT oris05\n"
"                    {\n"
"                      OFFSET -0.000000 -0.486000 0.000950\n"
"                      CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                      End Site\n"
"                      {\n"
"                        OFFSET 0.000000 -0.630493 0.197635\n"
"                      }\n"
"                    }\n"
"                  }\n"
"                }\n"
"              }\n"
"              JOINT __special03\n"
"              {\n"
"                OFFSET 0.000000 13.604700 -0.502080\n"
"                CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                JOINT special03\n"
"                {\n"
"                  OFFSET 0.000000 -13.499860 2.500710\n"
"                  CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                  JOINT __levator06.l\n"
"                  {\n"
"                    OFFSET -0.000000 1.035800 10.090229\n"
"                    CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                    JOINT levator06.l\n"
"                    {\n"
"                      OFFSET 0.522240 -0.615720 0.045900\n"
"                      CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                      End Site\n"
"                      {\n"
"                        OFFSET 1.107505 -0.131898 -2.142227\n"
"                      }\n"
"                    }\n"
"                  }\n"
"                  JOINT __levator06.r\n"
"                  {\n"
"                    OFFSET -0.000000 1.035800 10.090229\n"
"                    CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                    JOINT levator06.r\n"
"                    {\n"
"                      OFFSET -0.522240 -0.615730 0.045900\n"
"                      CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                      End Site\n"
"                      {\n"
"                        OFFSET -1.107506 -0.131893 -2.142227\n"
"                      }\n"
"                    }\n"
"                  }\n"
"                }\n"
"              }\n"
"              JOINT special06.l\n"
"              {\n"
"                OFFSET 0.000000 13.604700 -0.502080\n"
"                CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                JOINT special05.l\n"
"                {\n"
"                  OFFSET 2.108890 0.153870 5.595070\n"
"                  CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                  JOINT eye.l\n"
"                  {\n"
"                    OFFSET 0.857170 -10.254801 2.414670\n"
"                    CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                    End Site\n"
"                    {\n"
"                      OFFSET 0.111609 0.006490 4.051424\n"
"                    }\n"
"                  }\n"
"                  JOINT orbicularis03.l\n"
"                  {\n"
"                    OFFSET 0.857170 -10.254801 2.414670\n"
"                    CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                    End Site\n"
"                    {\n"
"                      OFFSET 0.097789 1.146431 3.788029\n"
"                    }\n"
"                  }\n"
"                  JOINT orbicularis04.l\n"
"                  {\n"
"                    OFFSET 0.857170 -10.254801 2.414670\n"
"                    CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                    End Site\n"
"                    {\n"
"                      OFFSET 0.113609 -1.130505 3.863064\n"
"                    }\n"
"                  }\n"
"                }\n"
"              }\n"
"              JOINT special06.r\n"
"              {\n"
"                OFFSET 0.000000 13.604700 -0.502080\n"
"                CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                JOINT special05.r\n"
"                {\n"
"                  OFFSET -2.108890 0.153870 5.595070\n"
"                  CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                  JOINT eye.r\n"
"                  {\n"
"                    OFFSET -0.857170 -10.254801 2.414670\n"
"                    CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                    End Site\n"
"                    {\n"
"                      OFFSET -0.111609 0.006490 4.051424\n"
"                    }\n"
"                  }\n"
"                  JOINT orbicularis03.r\n"
"                  {\n"
"                    OFFSET -0.857170 -10.254801 2.414670\n"
"                    CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                    End Site\n"
"                    {\n"
"                      OFFSET -0.097789 1.146431 3.788029\n"
"                    }\n"
"                  }\n"
"                  JOINT orbicularis04.r\n"
"                  {\n"
"                    OFFSET -0.857170 -10.254801 2.414670\n"
"                    CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                    End Site\n"
"                    {\n"
"                      OFFSET -0.113609 -1.130505 3.863064\n"
"                    }\n"
"                  }\n"
"                }\n"
"              }\n"
"              JOINT __temporalis01.l\n"
"              {\n"
"                OFFSET 0.000000 13.604700 -0.502080\n"
"                CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                JOINT temporalis01.l\n"
"                {\n"
"                  OFFSET 6.332510 -9.444281 6.595120\n"
"                  CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                  JOINT oculi02.l\n"
"                  {\n"
"                    OFFSET -0.804920 0.053010 1.621140\n"
"                    CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                    JOINT oculi01.l\n"
"                    {\n"
"                      OFFSET -2.161570 1.690970 2.142660\n"
"                      CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                      End Site\n"
"                      {\n"
"                        OFFSET -1.740622 0.281157 0.647323\n"
"                      }\n"
"                    }\n"
"                  }\n"
"                }\n"
"              }\n"
"              JOINT __temporalis01.r\n"
"              {\n"
"                OFFSET 0.000000 13.604700 -0.502080\n"
"                CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                JOINT temporalis01.r\n"
"                {\n"
"                  OFFSET -6.332510 -9.444281 6.595120\n"
"                  CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                  JOINT oculi02.r\n"
"                  {\n"
"                    OFFSET 0.804920 0.053010 1.621140\n"
"                    CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                    JOINT oculi01.r\n"
"                    {\n"
"                      OFFSET 2.161570 1.690970 2.142660\n"
"                      CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                      End Site\n"
"                      {\n"
"                        OFFSET 1.740622 0.281157 0.647323\n"
"                      }\n"
"                    }\n"
"                  }\n"
"                }\n"
"              }\n"
"              JOINT __temporalis02.l\n"
"              {\n"
"                OFFSET 0.000000 13.604700 -0.502080\n"
"                CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                JOINT temporalis02.l\n"
"                {\n"
"                  OFFSET 6.377600 -11.680510 6.235180\n"
"                  CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                  JOINT risorius02.l\n"
"                  {\n"
"                    OFFSET -0.814250 0.451130 1.721730\n"
"                    CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                    JOINT risorius03.l\n"
"                    {\n"
"                      OFFSET -0.649710 -2.514660 0.612550\n"
"                      CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                      End Site\n"
"                      {\n"
"                        OFFSET 0.479556 -1.760402 -1.642659\n"
"                      }\n"
"                    }\n"
"                  }\n"
"                }\n"
"              }\n"
"              JOINT __temporalis02.r\n"
"              {\n"
"                OFFSET 0.000000 13.604700 -0.502080\n"
"                CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                JOINT temporalis02.r\n"
"                {\n"
"                  OFFSET -6.377600 -11.680510 6.235180\n"
"                  CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                  JOINT risorius02.r\n"
"                  {\n"
"                    OFFSET 0.814250 0.451130 1.721730\n"
"                    CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                    JOINT risorius03.r\n"
"                    {\n"
"                      OFFSET 0.649710 -2.514660 0.612550\n"
"                      CHANNELS 3 Zrotation Xrotation Yrotation \n"
"                      End Site\n"
"                      {\n"
"                        OFFSET -0.479556 -1.760402 -1.642659\n"
"                      }\n"
"                    }\n"
"                  }\n"
"                }\n"
"              }\n"
"            }\n"
"          }\n"
"        }\n"
"      JOINT rCollar\n"
"      {\n"
"        OFFSET -2.68224 19.2634 -4.8768\n"
"        CHANNELS 3 Zrotation Xrotation Yrotation\n"
"        JOINT rShldr\n"
"        {\n"
"          OFFSET -8.77824 -1.95073 1.46304\n"
"          CHANNELS 3 Zrotation Xrotation Yrotation\n"
"          JOINT rForeArm\n"
"          {\n"
"            OFFSET -28.1742 -1.7115 0.48768\n"
"            CHANNELS 3 Zrotation Xrotation Yrotation\n"
"            JOINT rHand\n"
"            {\n"
"              OFFSET -22.5879 0.773209 7.07136\n"
"              CHANNELS 3 Zrotation Xrotation Yrotation\n"
"              JOINT rThumb1\n"
"              {\n"
"                OFFSET -1.2192 -0.487915 3.41376\n"
"                CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                JOINT rThumb2\n"
"                {\n"
"                  OFFSET -3.37035 -0.52449 3.41376\n"
"                  CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                  End Site\n"
"                  {\n"
"                    OFFSET -1.78271 -1.18214 1.43049\n"
"                  }\n"
"                }\n"
"              }\n"
"              JOINT rIndex1\n"
"              {\n"
"                OFFSET -7.75947 0.938293 5.60832\n"
"                CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                JOINT rIndex2\n"
"                {\n"
"                  OFFSET -2.54057 -0.884171 1.56538\n"
"                  CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                  End Site\n"
"                  {\n"
"                    OFFSET -1.62519 -0.234802 1.16502\n"
"                  }\n"
"                }\n"
"              }\n"
"              JOINT rMid1\n"
"              {\n"
"                OFFSET -8.24714 1.18213 3.41376\n"
"                CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                JOINT rMid2\n"
"                {\n"
"                  OFFSET -3.10165 -0.590103 1.0647\n"
"                  CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                  End Site\n"
"                  {\n"
"                    OFFSET -2.48547 -0.328903 0.83742\n"
"                  }\n"
"                }\n"
"              }\n"
"              JOINT rRing1\n"
"              {\n"
"                OFFSET -8.82822 0.546677 1.51678\n"
"                CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                JOINT rRing2\n"
"                {\n"
"                  OFFSET -2.60934 -0.819778 -0.0198488\n"
"                  CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                  End Site\n"
"                  {\n"
"                    OFFSET -2.33842 -0.294052 0.168128\n"
"                  }\n"
"                }\n"
"              }\n"
"              JOINT rPinky1\n"
"              {\n"
"                OFFSET -8.27202 -0.0477905 -0.4584\n"
"                CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                JOINT rPinky2\n"
"                {\n"
"                  OFFSET -1.82734 -0.647385 -0.700984\n"
"                  CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                  End Site\n"
"                  {\n"
"                    OFFSET -1.69225 -0.51767 -0.607171\n"
"                  }\n"
"                }\n"
"              }\n"
"            }\n"
"          }\n"
"        }\n"
"      }\n"
"      JOINT lCollar\n"
"      {\n"
"        OFFSET 2.68224 19.2634 -4.8768\n"
"        CHANNELS 3 Zrotation Xrotation Yrotation\n"
"        JOINT lShldr\n"
"        {\n"
"          OFFSET 8.77824 -1.95073 1.46304\n"
"          CHANNELS 3 Zrotation Xrotation Yrotation\n"
"          JOINT lForeArm\n"
"          {\n"
"            OFFSET 28.1742 -1.7115 0.48768\n"
"            CHANNELS 3 Zrotation Xrotation Yrotation\n"
"            JOINT lHand\n"
"            {\n"
"              OFFSET 22.5879 0.773209 7.07136\n"
"              CHANNELS 3 Zrotation Xrotation Yrotation\n"
"              JOINT lThumb1\n"
"              {\n"
"                OFFSET 1.2192 -0.487915 3.41376\n"
"                CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                JOINT lThumb2\n"
"                {\n"
"                  OFFSET 3.37035 -0.52449 3.41376\n"
"                  CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                  End Site\n"
"                  {\n"
"                    OFFSET 1.78271 -1.18214 1.43049\n"
"                  }\n"
"                }\n"
"              }\n"
"              JOINT lIndex1\n"
"              {\n"
"                OFFSET 7.75947 0.938293 5.60832\n"
"                CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                JOINT lIndex2\n"
"                {\n"
"                  OFFSET 2.54057 -0.884171 1.56538\n"
"                  CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                  End Site\n"
"                  {\n"
"                    OFFSET 1.62519 -0.234802 1.16502\n"
"                  }\n"
"                }\n"
"              }\n"
"              JOINT lMid1\n"
"              {\n"
"                OFFSET 8.24714 1.18213 3.41376\n"
"                CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                JOINT lMid2\n"
"                {\n"
"                  OFFSET 3.10165 -0.590103 1.0647\n"
"                  CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                  End Site\n"
"                  {\n"
"                    OFFSET 2.48547 -0.328903 0.83742\n"
"                  }\n"
"                }\n"
"              }\n"
"              JOINT lRing1\n"
"              {\n"
"                OFFSET 8.82822 0.546677 1.51678\n"
"                CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                JOINT lRing2\n"
"                {\n"
"                  OFFSET 2.60934 -0.819778 -0.0198488\n"
"                  CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                  End Site\n"
"                  {\n"
"                    OFFSET 2.33842 -0.294052 0.168128\n"
"                  }\n"
"                }\n"
"              }\n"
"              JOINT lPinky1\n"
"              {\n"
"                OFFSET 8.27202 -0.0477905 -0.4584\n"
"                CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                JOINT lPinky2\n"
"                {\n"
"                  OFFSET 1.82734 -0.647385 -0.700984\n"
"                  CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                  End Site\n"
"                  {\n"
"                    OFFSET 1.69225 -0.51767 -0.607171\n"
"                  }\n"
"                }\n"
"              }\n"
"            }\n"
"          }\n"
"        }\n"
"      }\n"
"    }\n"
"  }\n"
"  JOINT rButtock\n"
"  {\n"
"    OFFSET -8.77824 4.35084 1.2192\n"
"    CHANNELS 3 Zrotation Xrotation Yrotation\n"
"    JOINT rThigh\n"
"    {\n"
"      OFFSET 0 -1.70687 -2.19456\n"
"      CHANNELS 3 Zrotation Xrotation Yrotation\n"
"      JOINT rShin\n"
"      {\n"
"        OFFSET 0 -36.8199 0.73152\n"
"        CHANNELS 3 Zrotation Xrotation Yrotation\n"
"        JOINT rFoot\n"
"        {\n"
"          OFFSET 0.73152 -45.1104 -5.12064\n"
"          CHANNELS 3 Zrotation Xrotation Yrotation\n"
"          End Site\n"
"          {\n"
"            OFFSET -1.1221 -3.69964 12.103\n"
"          }\n"
"        }\n"
"      }\n"
"    }\n"
"  }\n"
"  JOINT lButtock\n"
"  {\n"
"    OFFSET 8.77824 4.35084 1.2192\n"
"    CHANNELS 3 Zrotation Xrotation Yrotation\n"
"    JOINT lThigh\n"
"    {\n"
"      OFFSET 0 -1.70687 -2.19456\n"
"      CHANNELS 3 Zrotation Xrotation Yrotation\n"
"      JOINT lShin\n"
"      {\n"
"        OFFSET 0 -36.8199 0.73152\n"
"        CHANNELS 3 Zrotation Xrotation Yrotation\n"
"        JOINT lFoot\n"
"        {\n"
"          OFFSET -0.73152 -45.1104 -5.12064\n"
"          CHANNELS 3 Zrotation Xrotation Yrotation\n"
"          End Site\n"
"          {\n"
"            OFFSET 1.1221 -3.69964 12.103\n"
"          }\n"
"        }\n"
"      }\n"
"    }\n"
"  }\n"
"}\n";


/**
 * @brief This is a BVH header that can be easily injected in a file ( using just an fprintf call )
 */
//To do this get replace \n with \\n"\n" in header.bvh
static const char * bvhHeaderOLD="HIERARCHY\n"
"ROOT hip\n"
"{\n"
"  OFFSET 0 0 0\n"
"  CHANNELS 6 Xposition Yposition Zposition Zrotation Yrotation Xrotation\n"
"  JOINT abdomen\n"
"  {\n"
"    OFFSET 0 20.6881 -0.73152\n"
"    CHANNELS 3 Zrotation Xrotation Yrotation\n"
"    JOINT chest\n"
"    {\n"
"      OFFSET 0 11.7043 -0.48768\n"
"      CHANNELS 3 Zrotation Xrotation Yrotation\n"
"      JOINT neck\n"
"      {\n"
"        OFFSET 0 22.1894 -2.19456\n"
"        CHANNELS 3 Zrotation Xrotation Yrotation\n"
"        JOINT head\n"
"        {\n"
"          OFFSET -0.24384 7.07133 1.2192\n"
"          CHANNELS 3 Zrotation Xrotation Yrotation\n"
"          JOINT leftEye\n"
"          {\n"
"            OFFSET 4.14528 8.04674 8.04672\n"
"            CHANNELS 3 Zrotation Xrotation Yrotation\n"
"            End Site\n"
"            {\n"
"              OFFSET 1 0 0\n"
"            }\n"
"          }\n"
"          JOINT rightEye\n"
"          {\n"
"            OFFSET -3.6576 8.04674 8.04672\n"
"            CHANNELS 3 Zrotation Xrotation Yrotation\n"
"            End Site\n"
"            {\n"
"              OFFSET 1 0 0\n"
"            }\n"
"          }\n"
"        }\n"
"      }\n"
"      JOINT rCollar\n"
"      {\n"
"        OFFSET -2.68224 19.2634 -4.8768\n"
"        CHANNELS 3 Zrotation Xrotation Yrotation\n"
"        JOINT rShldr\n"
"        {\n"
"          OFFSET -8.77824 -1.95073 1.46304\n"
"          CHANNELS 3 Zrotation Xrotation Yrotation\n"
"          JOINT rForeArm\n"
"          {\n"
"            OFFSET -28.1742 -1.7115 0.48768\n"
"            CHANNELS 3 Zrotation Xrotation Yrotation\n"
"            JOINT rHand\n"
"            {\n"
"              OFFSET -22.5879 0.773209 7.07136\n"
"              CHANNELS 3 Zrotation Xrotation Yrotation\n"
"              JOINT rThumb1\n"
"              {\n"
"                OFFSET -1.2192 -0.487915 3.41376\n"
"                CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                JOINT rThumb2\n"
"                {\n"
"                  OFFSET -3.37035 -0.52449 3.41376\n"
"                  CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                  End Site\n"
"                  {\n"
"                    OFFSET -1.78271 -1.18214 1.43049\n"
"                  }\n"
"                }\n"
"              }\n"
"              JOINT rIndex1\n"
"              {\n"
"                OFFSET -7.75947 0.938293 5.60832\n"
"                CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                JOINT rIndex2\n"
"                {\n"
"                  OFFSET -2.54057 -0.884171 1.56538\n"
"                  CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                  End Site\n"
"                  {\n"
"                    OFFSET -1.62519 -0.234802 1.16502\n"
"                  }\n"
"                }\n"
"              }\n"
"              JOINT rMid1\n"
"              {\n"
"                OFFSET -8.24714 1.18213 3.41376\n"
"                CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                JOINT rMid2\n"
"                {\n"
"                  OFFSET -3.10165 -0.590103 1.0647\n"
"                  CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                  End Site\n"
"                  {\n"
"                    OFFSET -2.48547 -0.328903 0.83742\n"
"                  }\n"
"                }\n"
"              }\n"
"              JOINT rRing1\n"
"              {\n"
"                OFFSET -8.82822 0.546677 1.51678\n"
"                CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                JOINT rRing2\n"
"                {\n"
"                  OFFSET -2.60934 -0.819778 -0.0198488\n"
"                  CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                  End Site\n"
"                  {\n"
"                    OFFSET -2.33842 -0.294052 0.168128\n"
"                  }\n"
"                }\n"
"              }\n"
"              JOINT rPinky1\n"
"              {\n"
"                OFFSET -8.27202 -0.0477905 -0.4584\n"
"                CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                JOINT rPinky2\n"
"                {\n"
"                  OFFSET -1.82734 -0.647385 -0.700984\n"
"                  CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                  End Site\n"
"                  {\n"
"                    OFFSET -1.69225 -0.51767 -0.607171\n"
"                  }\n"
"                }\n"
"              }\n"
"            }\n"
"          }\n"
"        }\n"
"      }\n"
"      JOINT lCollar\n"
"      {\n"
"        OFFSET 2.68224 19.2634 -4.8768\n"
"        CHANNELS 3 Zrotation Xrotation Yrotation\n"
"        JOINT lShldr\n"
"        {\n"
"          OFFSET 8.77824 -1.95073 1.46304\n"
"          CHANNELS 3 Zrotation Xrotation Yrotation\n"
"          JOINT lForeArm\n"
"          {\n"
"            OFFSET 28.1742 -1.7115 0.48768\n"
"            CHANNELS 3 Zrotation Xrotation Yrotation\n"
"            JOINT lHand\n"
"            {\n"
"              OFFSET 22.5879 0.773209 7.07136\n"
"              CHANNELS 3 Zrotation Xrotation Yrotation\n"
"              JOINT lThumb1\n"
"              {\n"
"                OFFSET 1.2192 -0.487915 3.41376\n"
"                CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                JOINT lThumb2\n"
"                {\n"
"                  OFFSET 3.37035 -0.52449 3.41376\n"
"                  CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                  End Site\n"
"                  {\n"
"                    OFFSET 1.78271 -1.18214 1.43049\n"
"                  }\n"
"                }\n"
"              }\n"
"              JOINT lIndex1\n"
"              {\n"
"                OFFSET 7.75947 0.938293 5.60832\n"
"                CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                JOINT lIndex2\n"
"                {\n"
"                  OFFSET 2.54057 -0.884171 1.56538\n"
"                  CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                  End Site\n"
"                  {\n"
"                    OFFSET 1.62519 -0.234802 1.16502\n"
"                  }\n"
"                }\n"
"              }\n"
"              JOINT lMid1\n"
"              {\n"
"                OFFSET 8.24714 1.18213 3.41376\n"
"                CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                JOINT lMid2\n"
"                {\n"
"                  OFFSET 3.10165 -0.590103 1.0647\n"
"                  CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                  End Site\n"
"                  {\n"
"                    OFFSET 2.48547 -0.328903 0.83742\n"
"                  }\n"
"                }\n"
"              }\n"
"              JOINT lRing1\n"
"              {\n"
"                OFFSET 8.82822 0.546677 1.51678\n"
"                CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                JOINT lRing2\n"
"                {\n"
"                  OFFSET 2.60934 -0.819778 -0.0198488\n"
"                  CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                  End Site\n"
"                  {\n"
"                    OFFSET 2.33842 -0.294052 0.168128\n"
"                  }\n"
"                }\n"
"              }\n"
"              JOINT lPinky1\n"
"              {\n"
"                OFFSET 8.27202 -0.0477905 -0.4584\n"
"                CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                JOINT lPinky2\n"
"                {\n"
"                  OFFSET 1.82734 -0.647385 -0.700984\n"
"                  CHANNELS 3 Zrotation Xrotation Yrotation\n"
"                  End Site\n"
"                  {\n"
"                    OFFSET 1.69225 -0.51767 -0.607171\n"
"                  }\n"
"                }\n"
"              }\n"
"            }\n"
"          }\n"
"        }\n"
"      }\n"
"    }\n"
"  }\n"
"  JOINT rButtock\n"
"  {\n"
"    OFFSET -8.77824 4.35084 1.2192\n"
"    CHANNELS 3 Zrotation Xrotation Yrotation\n"
"    JOINT rThigh\n"
"    {\n"
"      OFFSET 0 -1.70687 -2.19456\n"
"      CHANNELS 3 Zrotation Xrotation Yrotation\n"
"      JOINT rShin\n"
"      {\n"
"        OFFSET 0 -36.8199 0.73152\n"
"        CHANNELS 3 Zrotation Xrotation Yrotation\n"
"        JOINT rFoot\n"
"        {\n"
"          OFFSET 0.73152 -45.1104 -5.12064\n"
"          CHANNELS 3 Zrotation Xrotation Yrotation\n"
"          End Site\n"
"          {\n"
"            OFFSET -1.1221 -3.69964 12.103\n"
"          }\n"
"        }\n"
"      }\n"
"    }\n"
"  }\n"
"  JOINT lButtock\n"
"  {\n"
"    OFFSET 8.77824 4.35084 1.2192\n"
"    CHANNELS 3 Zrotation Xrotation Yrotation\n"
"    JOINT lThigh\n"
"    {\n"
"      OFFSET 0 -1.70687 -2.19456\n"
"      CHANNELS 3 Zrotation Xrotation Yrotation\n"
"      JOINT lShin\n"
"      {\n"
"        OFFSET 0 -36.8199 0.73152\n"
"        CHANNELS 3 Zrotation Xrotation Yrotation\n"
"        JOINT lFoot\n"
"        {\n"
"          OFFSET -0.73152 -45.1104 -5.12064\n"
"          CHANNELS 3 Zrotation Xrotation Yrotation\n"
"          End Site\n"
"          {\n"
"            OFFSET 1.1221 -3.69964 12.103\n"
"          }\n"
"        }\n"
"      }\n"
"    }\n"
"  }\n"
"}";


/**
 * @brief After collecting a vector of BVH output vectors this call can write them to disk in BVH format
 * to make them accessible by third party 3D animation software like blender etc.
 * @param Path to output file i.e. "output.bvh"
 * @param Pointer to BVH header string, if set to null it will default to the bvhHeader found in this header file.
 * @param Vector of BVH frame vectors.
 * @retval 1=Success,0=Failure
 */
int writeBVHFile(
                  const char * filename,
                  const char * header,
                  int prependTPose,
                   std::vector<std::vector<float> > bvhFrames
                );

/**
 * @brief This call loads a BVH file into a BVH_MotionCapture* structure that is casted in a void pointer 
 * to avoid all the include hassle 
 * @param Path to input file i.e. "input.bvh" 
 * @retval BVH_MotionCapture pointer that holds all the BVH information
 */
void * loadBVHFile(const char * filename);


/**
 * @brief This call frees all memory consumed by the BVH file loaded by a loadBVHFile call
 * @param Path to input file i.e. "input.bvh" 
 * @retval 1=Success/0=Failure
 */
int freeBVHFile(void * bvhMemoryHandler);


/**
 * @brief This call opens a BVH file decodes it and returns a vector of bvh frames where each frame has all the motions in another vector
 * @param Path to input file i.e. "input.bvh" 
 * @retval Vector of Vectors that hold all the BVH motions
 */
std::vector<std::vector<float> > loadBVHFileMotionFrames(const char * filename);



/**
 * @brief Initialize BVH code ( if it is present )
 * @retval 1=Success/0=Failure
 */
int initializeBVHConverter();


/**
 * @brief Get the joint ID of the parent of a joint
 * @param JointID that we want to get the parent for
 * @retval JointID of the parent/ 0 in the case of an error
 * @bug 0 can both be a valid joint and signal an error, so it needs special care
 */
unsigned int getBVHParentJoint(unsigned int currentJoint);


/**
 * @brief Get a string with the name of the joint
 * @param JointID that we want to get the name for
 * @retval CString with the name, null means no result
 */
const char * getBVHJointName(unsigned int currentJoint);



/**
 * @brief Get the jointID based on a string with the name of the joint
 * @param CString with the name we want to search for
 * @retval JointID that we want to get the name for, 0 means no result or the first joint
 */
unsigned int getBVHJointIDFromJointName(const char * jointName);

/**
 * @brief Initialize BVH code ( if it is present )
 * @param  A float corresponding to a BVH frame
 * @param  The width of the 2D frame that will hold the 2D Points
 * @param  The height of the 2D frame that will hold the 2D Points
 * @retval Vector of 2D points
 */
std::vector<std::vector<float> > convertBVHFrameTo2DPoints(
    std::vector<float> bvhFrame,
    unsigned int width,
    unsigned int height
);



/**
 * @brief Generate 2D points for a grid
 * @param  The width of the 2D frame that will hold the 2D Points
 * @param  The height of the 2D frame that will hold the 2D Points
 * @retval Vector of 2D points
 */
std::vector<std::vector<float> > convert3DGridTo2DPoints(
    float roll,
    float pitch,
    float yaw,
    unsigned int width,
    unsigned int height,
    unsigned int dimensions
);
